const {
  getMessages, postMessage, deleteMessage, updateMessage,
} = require('../services/index.js');

exports.getMessages = async (req, res) => {
  try {
    const data = await getMessages();
    res.status(200);
    res.send(data);
  } catch (e) {
    res.status(500);
    res.send(e);
  }
};

exports.postMessage = async (req, res) => {
  try {
    const { socketId, message } = req.body;
    const postedMessage = await postMessage(socketId, message);
    res.status(201);
    res.send(postedMessage);
  } catch (e) {
    res.status(500);
    res.send(e);
  }
};

exports.deleteMessage = async (req, res) => {
  try {
    const { id } = req.params;
    await deleteMessage(id);
    res.sendStatus(204);
  } catch (e) {
    res.status(500);
    res.send(e);
  }
};

exports.updateMessage = async (req, res) => {
  try {
    const { id, message } = req.body;
    const updatedMessage = await updateMessage(id, message);
    res.status(200);
    res.send(updatedMessage);
  } catch (e) {
    res.status(500);
    res.send(e);
  }
};
